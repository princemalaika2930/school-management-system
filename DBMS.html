<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6 Garrison Education Center - Complete School Management System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --bg-color: #f5f7fa;
            --text-color: #333;
            --card-bg: white;
            --header-bg: linear-gradient(135deg, var(--primary), var(--secondary));
            --footer-bg: var(--secondary);
            --border-color: #eee;
        }

        .dark-mode {
            --bg-color: #1a1a1a;
            --text-color: #f0f0f0;
            --card-bg: #2d2d2d;
            --header-bg: linear-gradient(135deg, #2c3e50, #1a252f);
            --footer-bg: #1a252f;
            --border-color: #444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: var(--header-bg);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 2rem;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .logo span {
            color: var(--warning);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.3s;
        }
        
        nav a:hover, nav a.active {
            background: rgba(255,255,255,0.2);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            cursor: pointer;
        }
        
        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid white;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 200px;
            z-index: 1000;
            display: none;
            margin-top: 10px;
        }

        .dark-mode .user-dropdown {
            background: var(--card-bg);
            color: var(--text-color);
        }

        .user-dropdown.active {
            display: block;
        }

        .user-dropdown a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid #eee;
            transition: background 0.3s;
        }

        .dark-mode .user-dropdown a {
            color: var(--text-color);
            border-bottom: 1px solid var(--border-color);
        }

        .user-dropdown a:hover {
            background: #f5f5f5;
        }

        .dark-mode .user-dropdown a:hover {
            background: #3d3d3d;
        }

        .user-dropdown a:last-child {
            border-bottom: none;
        }

        .notification-bell {
            position: relative;
            margin-right: 15px;
            cursor: pointer;
        }

        .notification-bell i {
            font-size: 1.2rem;
            color: white;
        }

        .notification-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .dashboard {
            padding: 2rem 0;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .dashboard-header h2 {
            color: var(--secondary);
            font-size: 1.8rem;
        }

        .dark-mode .dashboard-header h2 {
            color: var(--text-color);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .stat-info h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .stat-info p {
            color: #777;
            font-size: 0.9rem;
        }

        .dark-mode .stat-info p {
            color: #bbb;
        }
        
        .nursery { background-color: #ff9ff3; }
        .primary { background-color: #54a0ff; }
        .jhs { background-color: #1dd1a1; }
        .staff { background-color: #feca57; }
        .fees { background-color: #9b59b6; }
        
        .tabs {
            display: flex;
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 1rem;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 500;
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab:hover:not(.active) {
            background: #f1f1f1;
        }

        .dark-mode .tab:hover:not(.active) {
            background: #3d3d3d;
        }
        
        .content-section {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .section-header h3 {
            color: var(--secondary);
        }

        .dark-mode .section-header h3 {
            color: var(--text-color);
        }
        
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #27ae60;
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background: #e67e22;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        table th {
            background: #f8f9fa;
            color: var(--secondary);
            font-weight: 600;
        }

        .dark-mode table th {
            background: #3d3d3d;
            color: var(--text-color);
        }
        
        table tr:hover {
            background: #f8f9fa;
        }

        .dark-mode table tr:hover {
            background: #3d3d3d;
        }
        
        .badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .badge-nursery {
            background: #ff9ff3;
            color: #333;
        }
        
        .badge-primary {
            background: #54a0ff;
            color: white;
        }
        
        .badge-jhs {
            background: #1dd1a1;
            color: white;
        }
        
        .badge-paid {
            background: #2ecc71;
            color: white;
        }
        
        .badge-pending {
            background: #f39c12;
            color: white;
        }
        
        .badge-overdue {
            background: #e74c3c;
            color: white;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--secondary);
        }

        .dark-mode .form-group label {
            color: var(--text-color);
        }
        
        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            background: var(--card-bg);
            color: var(--text-color);
        }

        .dark-mode .form-control {
            border: 1px solid #555;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-header h3 {
            color: var(--secondary);
        }

        .dark-mode .modal-header h3 {
            color: var(--text-color);
        }
        
        .close {
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }

        .dark-mode .close {
            color: #bbb;
        }
        
        footer {
            background: var(--footer-bg);
            color: white;
            padding: 2rem 0;
            margin-top: 2rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-section h3 {
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .footer-section p {
            margin-bottom: 10px;
            color: #ccc;
        }
        
        .copyright {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: #ccc;
        }
        
        .chart-container {
            height: 300px;
            margin: 20px 0;
            position: relative;
        }
        
        .academic-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }
        
        .summary-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .summary-card h3 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .summary-card p {
            color: #777;
        }

        .dark-mode .summary-card p {
            color: #bbb;
        }
        
        .fee-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }
        
        .fee-stat-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .fee-stat-card h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        .fee-stat-card p {
            color: #777;
        }

        .dark-mode .fee-stat-card p {
            color: #bbb;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .setting-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .setting-card h4 {
            margin-bottom: 1rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dark-mode .setting-card h4 {
            color: var(--text-color);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .toggle-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .toggle-container:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .toggle-label {
            display: flex;
            flex-direction: column;
        }

        .toggle-label span:first-child {
            font-weight: 500;
        }

        .toggle-label span:last-child {
            font-size: 0.8rem;
            color: #777;
        }

        .dark-mode .toggle-label span:last-child {
            color: #bbb;
        }

        .notification-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-time {
            font-size: 0.8rem;
            color: #777;
        }

        .dark-mode .notification-time {
            color: #bbb;
        }

        .admin-panel {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .admin-sidebar {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            height: fit-content;
        }

        .admin-sidebar h3 {
            margin-bottom: 1rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dark-mode .admin-sidebar h3 {
            color: var(--text-color);
        }

        .admin-menu {
            list-style: none;
        }

        .admin-menu li {
            margin-bottom: 10px;
        }

        .admin-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            text-decoration: none;
            color: var(--text-color);
            border-radius: 5px;
            transition: background 0.3s;
        }

        .admin-menu a:hover, .admin-menu a.active {
            background: var(--primary);
            color: white;
        }

        .admin-content {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .system-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .status-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            border-left: 4px solid var(--primary);
        }

        .status-card.success {
            border-left-color: var(--success);
        }

        .status-card.warning {
            border-left-color: var(--warning);
        }

        .status-card.danger {
            border-left-color: var(--danger);
        }

        .status-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .status-card p {
            color: #777;
            font-size: 0.9rem;
        }

        .dark-mode .status-card p {
            color: #bbb;
        }

        .portal-header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .portal-header h2 {
            color: var(--secondary);
            margin-bottom: 1rem;
        }

        .portal-header p {
            color: #777;
            max-width: 600px;
            margin: 0 auto;
        }

        .dark-mode .portal-header p {
            color: #bbb;
        }

        .portal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .portal-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }

        .portal-card:hover {
            transform: translateY(-5px);
        }

        .portal-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            margin: 0 auto 1rem;
            background: var(--primary);
        }

        .portal-card h3 {
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        .dark-mode .portal-card h3 {
            color: var(--text-color);
        }

        .portal-card p {
            color: #777;
            margin-bottom: 1.5rem;
        }

        .dark-mode .portal-card p {
            color: #bbb;
        }

        .portal-features {
            list-style: none;
            text-align: left;
            margin-bottom: 1.5rem;
        }

        .portal-features li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .portal-features li:last-child {
            border-bottom: none;
        }

        .portal-features i {
            color: var(--success);
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
        }

        .login-box {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-header h2 {
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }

        .login-header p {
            color: #777;
        }

        .login-form .form-group {
            margin-bottom: 1.5rem;
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .forgot-password {
            color: var(--primary);
            text-decoration: none;
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .login-btn:hover {
            background: #2980b9;
        }

        .role-selection {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 1.5rem;
        }

        .role-option {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .role-option.active {
            border-color: var(--primary);
            background: rgba(52, 152, 219, 0.1);
        }

        .role-option i {
            font-size: 1.5rem;
            margin-bottom: 5px;
            display: block;
        }

        .role-restricted {
            display: none;
        }

        .teacher-view .role-restricted.teacher,
        .student-view .role-restricted.student,
        .parent-view .role-restricted.parent {
            display: block;
        }

        .admin-view .role-restricted.admin {
            display: block;
        }

        /* NEW STYLES FOR ENHANCEMENTS */
        
        /* Breadcrumbs */
        .breadcrumbs {
            background: var(--card-bg);
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .breadcrumbs nav {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .breadcrumbs a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        .breadcrumbs .separator {
            color: #777;
        }

        .breadcrumbs span {
            color: var(--text-color);
        }

        /* Mobile Menu */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }

        /* Tooltips */
        .tooltip {
            position: fixed;
            background: var(--secondary);
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.9rem;
            z-index: 9999;
            pointer-events: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s, transform 0.3s;
            max-width: 200px;
            text-align: center;
        }

        .tooltip.active {
            opacity: 1;
            transform: translateY(0);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 5px 5px 0;
            border-style: solid;
            border-color: var(--secondary) transparent transparent transparent;
        }

        /* Loading States */
        .loading {
            position: relative;
            opacity: 0.7;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 30px;
            height: 30px;
            margin: -15px 0 0 -15px;
            border: 3px solid var(--primary);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--primary);
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Error Messages */
        .error-message {
            color: var(--danger) !important;
            font-size: 0.8rem !important;
            margin-top: 5px !important;
        }

        /* Keyboard Shortcuts Hint */
        .shortcut-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .shortcut-hint.active {
            display: block;
        }

        /* Print Styles */
        @media print {
            header, footer, .btn, .tabs, .modal, .user-info, .breadcrumbs, .mobile-menu-toggle,
            .shortcut-hint, .no-print {
                display: none !important;
            }
            
            .content-section {
                display: block !important;
                box-shadow: none !important;
                border: 1px solid #000 !important;
                break-inside: avoid;
            }
            
            body {
                background: white !important;
                color: black !important;
                font-size: 12pt !important;
            }
            
            table {
                page-break-inside: auto;
                font-size: 10pt !important;
            }
            
            tr {
                page-break-inside: avoid;
                page-break-after: auto;
            }
            
            .chart-container {
                height: 200px !important;
            }
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                display: none;
            }
            
            nav ul.active {
                display: flex;
                position: absolute;
                top: 70px;
                left: 0;
                width: 100%;
                background: var(--header-bg);
                flex-direction: column;
                padding: 20px;
                z-index: 1000;
                box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            }
            
            .mobile-menu-toggle {
                display: block;
                position: absolute;
                right: 20px;
                top: 15px;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .academic-summary, .fee-stats {
                grid-template-columns: 1fr;
            }

            .admin-panel {
                grid-template-columns: 1fr;
            }

            .admin-sidebar {
                order: 2;
            }

            .admin-content {
                order: 1;
            }

            .portal-grid {
                grid-template-columns: 1fr;
            }

            .role-selection {
                grid-template-columns: 1fr;
            }

            .breadcrumbs {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- Keyboard Shortcuts Hint -->
    <div class="shortcut-hint" id="shortcutHint"></div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-graduation-cap"></i>
                    <h1>6 Garrison Education Center <span>Tamale</span></h1>
                </div>
                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <nav>
                    <ul id="navMenu">
                        <li><a href="#" class="nav-link active" data-target="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                        <li class="role-restricted admin teacher"><a href="#" class="nav-link" data-target="students"><i class="fas fa-user-graduate"></i> Students</a></li>
                        <li class="role-restricted admin"><a href="#" class="nav-link" data-target="staff"><i class="fas fa-chalkboard-teacher"></i> Staff</a></li>
                        <li><a href="#" class="nav-link" data-target="academics"><i class="fas fa-book"></i> Academics</a></li>
                        <li class="role-restricted admin parent student"><a href="#" class="nav-link" data-target="fees"><i class="fas fa-money-bill-wave"></i> Fees</a></li>
                        <li class="role-restricted admin teacher"><a href="#" class="nav-link" data-target="reports"><i class="fas fa-chart-bar"></i> Reports</a></li>
                        <li><a href="#" class="nav-link" data-target="portals"><i class="fas fa-door-open"></i> Portals</a></li>
                    </ul>
                </nav>
                <div class="header-actions">
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">3</span>
                    </div>
                    <div class="user-info">
                        <img src="https://ui-avatars.com/api/?name=Admin+User&background=3498db&color=fff" alt="Admin">
                        <span>Admin User</span>
                        <div class="user-dropdown">
                            <a href="#" class="role-restricted admin" data-target="admin"><i class="fas fa-cog"></i> Admin Panel</a>
                            <a href="#" data-target="settings"><i class="fas fa-sliders-h"></i> Settings</a>
                            <a href="#" class="dark-mode-toggle"><i class="fas fa-moon"></i> Dark Mode</a>
                            <a href="#"><i class="fas fa-user-shield"></i> My Profile</a>
                            <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="dashboard">
        <div class="container">
            <!-- Login Section -->
            <div class="content-section active" id="login">
                <div class="login-container">
                    <div class="login-box">
                        <div class="login-header">
                            <h2>Welcome to 6 Garrison Education </h2>
                            <p>Sign in to access your account</p>
                        </div>
                        <form class="login-form">
                            <div class="form-group">
                                <label for="username">Username</label>
                                <input type="text" id="username" class="form-control" placeholder="Enter your username" required>
                            </div>
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" class="form-control" placeholder="Enter your password" required>
                            </div>
                            <div class="role-selection">
                                <div class="role-option active" data-role="admin">
                                    <i class="fas fa-user-shield"></i>
                                    <span>Administrator</span>
                                </div>
                                <div class="role-option" data-role="teacher">
                                    <i class="fas fa-chalkboard-teacher"></i>
                                    <span>Teacher</span>
                                </div>
                                <div class="role-option" data-role="student">
                                    <i class="fas fa-user-graduate"></i>
                                    <span>Student</span>
                                </div>
                                <div class="role-option" data-role="parent">
                                    <i class="fas fa-user-friends"></i>
                                    <span>Parent</span>
                                </div>
                            </div>
                            <div class="login-options">
                                <div class="remember-me">
                                    <input type="checkbox" id="remember">
                                    <label for="remember">Remember me</label>
                                </div>
                                <a href="#" class="forgot-password">Forgot password?</a>
                            </div>
                            <button type="submit" class="login-btn">Sign In</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="content-section" id="dashboard">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Dashboard</span>
                    </nav>
                </div>

                <div class="dashboard-header">
                    <h2 id="dashboard-title">School Management Dashboard</h2>
                    <button class="btn btn-primary role-restricted admin teacher" id="quickAddBtn"><i class="fas fa-plus"></i> Quick Add</button>
                </div>

                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon nursery">
                            <i class="fas fa-baby"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="nurseryCount">245</h3>
                            <p>Nursery Students</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon primary">
                            <i class="fas fa-child"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="primaryCount">512</h3>
                            <p>Primary Students</p>
                        </div>
                    </div>
                    <div class="stat-card role-restricted admin teacher">
                        <div class="stat-icon jhs">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="jhsCount">328</h3>
                            <p>JHS Students</p>
                        </div>
                    </div>
                    <div class="stat-card role-restricted admin">
                        <div class="stat-icon staff">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="staffCount">68</h3>
                            <p>Teaching Staff</p>
                        </div>
                    </div>
                    <div class="stat-card role-restricted admin">
                        <div class="stat-icon fees">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="feesCollected">â‚µ86,420</h3>
                            <p>Total Fees Collected</p>
                        </div>
                    </div>
                </div>

                <div class="tabs role-restricted admin teacher">
                    <div class="tab active" data-tab="nursery">Nursery</div>
                    <div class="tab" data-tab="primary">Primary</div>
                    <div class="tab" data-tab="jhs">Junior High</div>
                    <div class="tab" data-tab="staff">Staff</div>
                </div>

                <div class="content-section role-restricted admin teacher">
                    <div class="section-header">
                        <h3>Recent Student Admissions</h3>
                        <div>
                            <input type="text" class="form-control" placeholder="Search students..." style="width: 250px; display: inline-block;" id="searchStudents">
                            <button class="btn btn-success export-btn" data-table="studentsTable"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    
                    <table id="studentsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Level</th>
                                <th>Class</th>
                                <th>Parent</th>
                                <th>Contact</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NS-001</td>
                                <td>Emma Johnson</td>
                                <td><span class="badge badge-nursery">Nursery</span></td>
                                <td>KG 1</td>
                                <td>Michael Johnson</td>
                                <td>+233 24 123 4567</td>
                                <td>
                                    <button class="btn btn-primary"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-success"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>PS-045</td>
                                <td>Kwame Mensah</td>
                                <td><span class="badge badge-primary">Primary</span></td>
                                <td>Class 3</td>
                                <td>Abena Mensah</td>
                                <td>+233 20 987 6543</td>
                                <td>
                                    <button class="btn btn-primary"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-success"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h3>Academic Performance Overview</h3>
                        <div>
                            <select class="form-control" style="width: 200px; display: inline-block;">
                                <option>Select Term</option>
                                <option>First Term</option>
                                <option>Second Term</option>
                                <option>Third Term</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-around; text-align: center; margin-top: 2rem;">
                        <div>
                            <h3 style="color: var(--primary); font-size: 2.5rem;">92%</h3>
                            <p>Nursery Pass Rate</p>
                        </div>
                        <div>
                            <h3 style="color: var(--success); font-size: 2.5rem;">87%</h3>
                            <p>Primary Pass Rate</p>
                        </div>
                        <div>
                            <h3 style="color: var(--warning); font-size: 2.5rem;">78%</h3>
                            <p>JHS Pass Rate</p>
                        </div>
                    </div>
                </div>

                <!-- Student-specific dashboard content -->
                <div class="content-section role-restricted student">
                    <div class="section-header">
                        <h3>My Academic Progress</h3>
                    </div>
                    <div class="academic-summary">
                        <div class="summary-card">
                            <h3>85%</h3>
                            <p>Overall Average</p>
                        </div>
                        <div class="summary-card">
                            <h3>92%</h3>
                            <p>Attendance</p>
                        </div>
                        <div class="summary-card">
                            <h3>15</h3>
                            <p>Assignments Due</p>
                        </div>
                        <div class="summary-card">
                            <h3>5</h3>
                            <p>Upcoming Tests</p>
                        </div>
                    </div>
                </div>

                <!-- Teacher-specific dashboard content -->
                <div class="content-section role-restricted teacher">
                    <div class="section-header">
                        <h3>My Classes</h3>
                    </div>
                    <div class="stats-container">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3>32</h3>
                                <p>Students in Class 3</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon warning">
                                <i class="fas fa-clipboard-list"></i>
                            </div>
                            <div class="stat-info">
                                <h3>5</h3>
                                <p>Pending Assessments</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon success">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3>78%</h3>
                                <p>Class Average</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Parent-specific dashboard content -->
                <div class="content-section role-restricted parent">
                    <div class="section-header">
                        <h3>My Children</h3>
                    </div>
                    <div class="stats-container">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Emma</h3>
                                <p>Class 3 - 85% Average</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon nursery">
                                <i class="fas fa-baby"></i>
                            </div>
                            <div class="stat-info">
                                <h3>Kwame</h3>
                                <p>KG 2 - Excellent</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon warning">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                                <div class="stat-info">
                                <h3>â‚µ520</h3>
                                <p>Fees Due</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Students Section -->
            <div class="content-section" id="students">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Student Management</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-user-graduate"></i> Student Management</h3>
                    <div>
                        <button class="btn btn-primary role-restricted admin" id="addStudentBtn"><i class="fas fa-plus"></i> Add Student</button>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-student-tab="all">All Students</div>
                    <div class="tab role-restricted admin teacher" data-student-tab="nursery">Nursery</div>
                    <div class="tab role-restricted admin teacher" data-student-tab="primary">Primary</div>
                    <div class="tab role-restricted admin teacher" data-student-tab="jhs">JHS</div>
                </div>
                
                <div class="content-section active">
                    <div class="section-header">
                        <h4>Student Records</h4>
                        <div>
                            <input type="text" class="form-control" placeholder="Search students..." style="width: 250px; display: inline-block;" id="searchStudentRecords">
                            <button class="btn btn-success export-btn" data-table="studentRecordsTable"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    
                    <table id="studentRecordsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Level</th>
                                <th>Class</th>
                                <th>Gender</th>
                                <th>Parent</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th class="role-restricted admin teacher">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NS-001</td>
                                <td>Emma Johnson</td>
                                <td><span class="badge badge-nursery">Nursery</span></td>
                                <td>KG 1</td>
                                <td>Female</td>
                                <td>Michael Johnson</td>
                                <td>+233 24 123 4567</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td class="role-restricted admin teacher">
                                    <button class="btn btn-primary"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-success"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>PS-045</td>
                                <td>Kwame Mensah</td>
                                <td><span class="badge badge-primary">Primary</span></td>
                                <td>Class 3</td>
                                <td>Male</td>
                                <td>Abena Mensah</td>
                                <td>+233 20 987 6543</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td class="role-restricted admin teacher">
                                    <button class="btn btn-primary"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-success"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Staff Section (Admin only) -->
            <div class="content-section" id="staff">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Staff Management</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-chalkboard-teacher"></i> Staff Management</h3>
                    <div>
                        <button class="btn btn-primary" id="addTeacherBtn"><i class="fas fa-plus"></i> Add Teacher</button>
                        <button class="btn btn-success"><i class="fas fa-plus"></i> Add Staff</button>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-staff-tab="all">All Staff</div>
                    <div class="tab" data-staff-tab="teaching">Teaching</div>
                    <div class="tab" data-staff-tab="non-teaching">Non-Teaching</div>
                    <div class="tab" data-staff-tab="admin">Administration</div>
                </div>
                
                <div class="content-section active">
                    <div class="section-header">
                        <h4>Staff Records</h4>
                        <div>
                            <input type="text" class="form-control" placeholder="Search staff..." style="width: 250px; display: inline-block;" id="searchStaff">
                            <button class="btn btn-success export-btn" data-table="staffTable"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    
                    <table id="staffTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Role</th>
                                <th>Level</th>
                                <th>Subject/Dept</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>T-001</td>
                                <td>Mr. Daniel Asante</td>
                                <td>Class Teacher</td>
                                <td>Primary</td>
                                <td>Class 3</td>
                                <td>+233 24 555 1234</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <button class="btn btn-primary"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-success"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>T-045</td>
                                <td>Mrs. Grace Mensah</td>
                                <td>Subject Teacher</td>
                                <td>JHS</td>
                                <td>Mathematics</td>
                                <td>+233 20 444 5678</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <button class="btn btn-primary"><i class="fas fa-edit"></i></button>
                                    <button class="btn btn-success"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Academics Section -->
            <div class="content-section" id="academics">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Academic Management</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-book"></i> Academic Management</h3>
                    <div>
                        <button class="btn btn-primary role-restricted admin teacher"><i class="fas fa-plus"></i> Add Result</button>
                        <button class="btn btn-success role-restricted admin teacher"><i class="fas fa-calendar-plus"></i> Set Timetable</button>
                    </div>
                </div>
                
                <div class="academic-summary">
                    <div class="summary-card">
                        <h3>92%</h3>
                        <p>Overall Pass Rate</p>
                    </div>
                    <div class="summary-card">
                        <h3>78%</h3>
                        <p>Average Attendance</p>
                    </div>
                    <div class="summary-card role-restricted admin teacher">
                        <h3>245</h3>
                        <p>Assignments Given</p>
                    </div>
                    <div class="summary-card">
                        <h3>92%</h3>
                        <p>Assignment Completion</p>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-academic-tab="results">Exam Results</div>
                    <div class="tab" data-academic-tab="timetable">Timetable</div>
                    <div class="tab role-restricted admin teacher" data-academic-tab="subjects">Subjects</div>
                    <div class="tab role-restricted admin teacher" data-academic-tab="attendance">Attendance</div>
                </div>
                
                <div class="content-section active">
                    <div class="section-header">
                        <h4>Term Examination Results - Second Term 2023</h4>
                        <div>
                            <select class="form-control" style="width: 200px; display: inline-block;">
                                <option>Select Class</option>
                                <option>Nursery - KG 1</option>
                                <option>Nursery - KG 2</option>
                                <option>Primary - Class 1</option>
                                <option>Primary - Class 2</option>
                                <option>Primary - Class 3</option>
                                <option>Primary - Class 4</option>
                                <option>Primary - Class 5</option>
                                <option>Primary - Class 6</option>
                                <option>JHS - Form 1</option>
                                <option>JHS - Form 2</option>
                                <option>JHS - Form 3</option>
                            </select>
                            <button class="btn btn-success export-btn" data-table="examResultsTable"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    
                    <table id="examResultsTable">
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Mathematics</th>
                                <th>English</th>
                                <th>Science</th>
                                <th>Social Studies</th>
                                <th>Total</th>
                                <th>Position</th>
                                <th>Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>JHS-112</td>
                                <td>Ama Boateng</td>
                                <td>85</td>
                                <td>92</td>
                                <td>88</td>
                                <td>90</td>
                                <td>355</td>
                                <td>1st</td>
                                <td>Excellent</td>
                            </tr>
                            <tr>
                                <td>JHS-113</td>
                                <td>Kwame Asante</td>
                                <td>78</td>
                                <td>85</td>
                                <td>80</td>
                                <td>82</td>
                                <td>325</td>
                                <td>2nd</td>
                                <td>Very Good</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Fees Section -->
            <div class="content-section" id="fees">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Fee Management</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-money-bill-wave"></i> Fee Management</h3>
                    <div>
                        <button class="btn btn-primary role-restricted admin"><i class="fas fa-plus"></i> Record Payment</button>
                        <button class="btn btn-success role-restricted admin"><i class="fas fa-cog"></i> Configure Fees</button>
                    </div>
                </div>
                
                <div class="fee-stats">
                    <div class="fee-stat-card role-restricted admin">
                        <h3>â‚µ86,420</h3>
                        <p>Total Collected</p>
                    </div>
                    <div class="fee-stat-card role-restricted admin">
                        <h3>â‚µ24,580</h3>
                        <p>Pending Payments</p>
                    </div>
                    <div class="fee-stat-card role-restricted admin">
                        <h3>â‚µ12,350</h3>
                        <p>Overdue Payments</p>
                    </div>
                    <div class="fee-stat-card">
                        <h3>78%</h3>
                        <p>Collection Rate</p>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-fee-tab="all">All Payments</div>
                    <div class="tab" data-fee-tab="paid">Paid</div>
                    <div class="tab" data-fee-tab="pending">Pending</div>
                    <div class="tab" data-fee-tab="overdue">Overdue</div>
                </div>
                
                <div class="content-section active">
                    <div class="section-header">
                        <h4>Fee Records - Term 2, 2023</h4>
                        <div>
                            <input type="text" class="form-control" placeholder="Search payments..." style="width: 250px; display: inline-block;" id="searchPayments">
                            <button class="btn btn-success export-btn" data-table="feesTable"><i class="fas fa-download"></i> Export</button>
                        </div>
                    </div>
                    
                    <table id="feesTable">
                        <thead>
                            <tr>
                                <th>Receipt No</th>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Level</th>
                                <th>Amount</th>
                                <th>Due Date</th>
                                <th>Status</th>
                                <th class="role-restricted admin">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>RCP-00123</td>
                                <td>NS-001</td>
                                <td>Emma Johnson</td>
                                <td>Nursery</td>
                                <td>â‚µ450.00</td>
                                <td>15/09/2023</td>
                                <td><span class="badge badge-paid">Paid</span></td>
                                <td class="role-restricted admin">
                                    <button class="btn btn-success"><i class="fas fa-print"></i></button>
                                    <button class="btn btn-primary"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>RCP-00124</td>
                                <td>PS-045</td>
                                <td>Kwame Mensah</td>
                                <td>Primary</td>
                                <td>â‚µ520.00</td>
                                <td>15/09/2023</td>
                                <td><span class="badge badge-pending">Pending</span></td>
                                <td class="role-restricted admin">
                                    <button class="btn btn-warning"><i class="fas fa-money-bill"></i></button>
                                    <button class="btn btn-primary"><i class="fas fa-eye"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Reports Section -->
            <div class="content-section" id="reports">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Reports & Analytics</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-chart-bar"></i> Reports & Analytics</h3>
                    <div>
                        <button class="btn btn-primary" id="exportChartBtn"><i class="fas fa-download"></i> Export Chart</button>
                        <button class="btn btn-success" onclick="window.print()"><i class="fas fa-print"></i> Print</button>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-report-tab="overview">Overview</div>
                    <div class="tab" data-report-tab="academic">Academic</div>
                    <div class="tab role-restricted admin" data-report-tab="financial">Financial</div>
                    <div class="tab" data-report-tab="attendance">Attendance</div>
                </div>
                
                <div class="content-section active">
                    <div class="section-header">
                        <h4>School Performance Overview - 2023 Academic Year</h4>
                        <div>
                            <select class="form-control" style="width: 200px; display: inline-block;" id="reportYear">
                                <option>2023 Academic Year</option>
                                <option>2022 Academic Year</option>
                                <option>2021 Academic Year</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                    
                    <div class="stats-container">
                        <div class="stat-card">
                            <div class="stat-icon primary">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <div class="stat-info">
                                <h3>1,085</h3>
                                <p>Total Students</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon success">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-info">
                                <h3>86%</h3>
                                <p>Average Pass Rate</p>
                            </div>
                        </div>
                        <div class="stat-card role-restricted admin">
                            <div class="stat-icon warning">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-info">
                                <h3>â‚µ286,420</h3>
                                <p>Total Revenue</p>
                            </div>
                        </div>
                        <div class="stat-card role-restricted admin">
                            <div class="stat-icon danger">
                                <i class="fas fa-user-friends"></i>
                            </div>
                            <div class="stat-info">
                                <h3>78</h3>
                                <p>Teaching Staff</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portals Section -->
            <div class="content-section" id="portals">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Access Portals</span>
                    </nav>
                </div>

                <div class="portal-header">
                    <h2><i class="fas fa-door-open"></i> Access Portals</h2>
                    <p>Select a portal to access specialized interfaces for different user roles in the school management system</p>
                </div>

                <div class="portal-grid">
                    <div class="portal-card">
                        <div class="portal-icon" style="background: #3498db;">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3>Student Portal</h3>
                        <p>Access academic records, timetables, results, and more</p>
                        <ul class="portal-features">
                            <li><i class="fas fa-check"></i> View academic results</li>
                            <li><i class="fas fa-check"></i> Check timetable</li>
                            <li><i class="fas fa-check"></i> Access learning resources</li>
                            <li><i class="fas fa-check"></i> View attendance records</li>
                            <li><i class="fas fa-check"></i> Submit assignments</li>
                        </ul>
                        <button class="btn btn-primary" style="width: 100%;" data-portal="student">Access Student Portal</button>
                    </div>

                    <div class="portal-card">
                        <div class="portal-icon" style="background: #2ecc71;">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <h3>Teacher Portal</h3>
                        <p>Manage classes, submit results, track attendance, and more</p>
                        <ul class="portal-features">
                            <li><i class="fas fa-check"></i> Manage class records</li>
                            <li><i class="fas fa-check"></i> Submit student results</li>
                            <li><i class="fas fa-check"></i> Track attendance</li>
                            <li><i class="fas fa-check"></i> Create assignments</li>
                            <li><i class="fas fa-check"></i> Communicate with parents</li>
                        </ul>
                        <button class="btn btn-primary" style="width: 100%;" data-portal="teacher">Access Teacher Portal</button>
                    </div>

                    <div class="portal-card">
                        <div class="portal-icon" style="background: #9b59b6;">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Staff Portal</h3>
                        <p>Access HR information, payroll, and administrative tools</p>
                        <ul class="portal-features">
                            <li><i class="fas fa-check"></i> View payroll information</li>
                            <li><i class="fas fa-check"></i> Access HR resources</li>
                            <li><i class="fas fa-check"></i> Submit leave requests</li>
                            <li><i class="fas fa-check"></i> View work schedules</li>
                            <li><i class="fas fa-check"></i> Access staff directory</li>
                        </ul>
                        <button class="btn btn-primary" style="width: 100%;" data-portal="staff">Access Staff Portal</button>
                    </div>

                    <div class="portal-card">
                        <div class="portal-icon" style="background: #e67e22;">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <h3>Parent Portal</h3>
                        <p>Monitor your child's progress, fees, and communicate with teachers</p>
                        <ul class="portal-features">
                            <li><i class="fas fa-check"></i> View child's academic progress</li>
                            <li><i class="fas fa-check"></i> Check fee payments</li>
                            <li><i class="fas fa-check"></i> Communicate with teachers</li>
                            <li><i class="fas fa-check"></i> View school announcements</li>
                            <li><i class="fas fa-check"></i> Access school calendar</li>
                        </ul>
                        <button class="btn btn-primary" style="width: 100%;" data-portal="parent">Access Parent Portal</button>
                    </div>
                </div>
            </div>

            <!-- Admin Panel Section (Admin only) -->
            <div class="content-section" id="admin">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Admin Panel</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-user-shield"></i> Admin Panel</h3>
                    <div>
                        <button class="btn btn-primary" id="exportAllDataBtn"><i class="fas fa-download"></i> Export All Data</button>
                        <button class="btn btn-success"><i class="fas fa-sync"></i> System Backup</button>
                    </div>
                </div>

                <div class="admin-panel">
                    <div class="admin-sidebar">
                        <h3><i class="fas fa-cog"></i> Admin Settings</h3>
                        <ul class="admin-menu">
                            <li><a href="#" class="admin-nav active" data-admin-tab="overview"><i class="fas fa-tachometer-alt"></i> Overview</a></li>
                            <li><a href="#" class="admin-nav" data-admin-tab="users"><i class="fas fa-users-cog"></i> User Management</a></li>
                            <li><a href="#" class="admin-nav" data-admin-tab="system"><i class="fas fa-server"></i> System Settings</a></li>
                            <li><a href="#" class="admin-nav" data-admin-tab="security"><i class="fas fa-shield-alt"></i> Security</a></li>
                            <li><a href="#" class="admin-nav" data-admin-tab="backup"><i class="fas fa-database"></i> Backup & Restore</a></li>
                            <li><a href="#" class="admin-nav" data-admin-tab="logs"><i class="fas fa-clipboard-list"></i> System Logs</a></li>
                        </ul>
                    </div>

                    <div class="admin-content">
                        <div class="admin-tab-content active" id="admin-overview">
                            <h4>System Overview</h4>
                            <div class="system-status">
                                <div class="status-card success">
                                    <h3>Online</h3>
                                    <p>System Status</p>
                                </div>
                                <div class="status-card">
                                    <h3>1,085</h3>
                                    <p>Total Users</p>
                                </div>
                                <div class="status-card">
                                    <h3>98.7%</h3>
                                    <p>Uptime</p>
                                </div>
                                <div class="status-card warning">
                                    <h3>3</h3>
                                    <p>Pending Tasks</p>
                                </div>
                            </div>

                            <div class="section-header">
                                <h4>Recent Activity</h4>
                            </div>
                            <table id="activityTable">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Action</th>
                                        <th>Time</th>
                                        <th>IP Address</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Admin User</td>
                                        <td>Logged in</td>
                                        <td>2 minutes ago</td>
                                        <td>192.168.1.105</td>
                                    </tr>
                                    <tr>
                                        <td>Grace Mensah</td>
                                        <td>Updated student record</td>
                                        <td>15 minutes ago</td>
                                        <td>192.168.1.112</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="content-section" id="settings">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs no-print">
                    <nav>
                        <a href="#" data-target="dashboard">Dashboard</a>
                        <span class="separator">/</span>
                        <span id="currentPage">Settings</span>
                    </nav>
                </div>

                <div class="section-header">
                    <h3><i class="fas fa-sliders-h"></i> Settings</h3>
                </div>

                <div class="settings-grid">
                    <div class="setting-card">
                        <h4><i class="fas fa-palette"></i> Appearance</h4>
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <span>Dark Mode</span>
                                <span>Switch between light and dark themes</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="darkModeToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <span>Compact View</span>
                                <span>Use compact spacing for lists and tables</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="compactViewToggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h4><i class="fas fa-bell"></i> Notifications</h4>
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <span>Email Notifications</span>
                                <span>Receive notifications via email</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="emailNotifications" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <span>Push Notifications</span>
                                <span>Receive browser notifications</span>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="pushNotifications" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="setting-card">
                        <h4><i class="fas fa-language"></i> Language & Region</h4>
                        <div class="form-group">
                            <label for="language">Language</label>
                            <select id="language" class="form-control">
                                <option>English</option>
                                <option>French</option>
                                <option>Spanish</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="timezone">Timezone</label>
                            <select id="timezone" class="form-control">
                                <option>GMT (Greenwich Mean Time)</option>
                                <option>EST (Eastern Standard Time)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Add Student Modal -->
    <div class="modal" id="addStudentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Student</h3>
                <span class="close">&times;</span>
            </div>
            <form id="addStudentForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="level">Education Level</label>
                        <select id="level" class="form-control" required>
                            <option value="">Select Level</option>
                            <option value="nursery">Nursery</option>
                            <option value="primary">Primary</option>
                            <option value="jhs">Junior High School</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="class">Class</label>
                        <input type="text" id="class" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" id="dob" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="parentName">Parent/Guardian Name</label>
                    <input type="text" id="parentName" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="parentContact">Parent/Guardian Contact</label>
                    <input type="tel" id="parentContact" class="form-control" required>
                </div>
                
                <div style="text-align: right; margin-top: 1.5rem;">
                    <button type="button" class="btn" style="margin-right: 10px;">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Student</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Teacher Modal -->
    <div class="modal" id="addTeacherModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Teacher</h3>
                <span class="close">&times;</span>
            </div>
            <form id="addTeacherForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="teacherFirstName">First Name</label>
                        <input type="text" id="teacherFirstName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="teacherLastName">Last Name</label>
                        <input type="text" id="teacherLastName" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="teacherLevel">Education Level</label>
                        <select id="teacherLevel" class="form-control" required>
                            <option value="">Select Level</option>
                            <option value="nursery">Nursery</option>
                            <option value="primary">Primary</option>
                            <option value="jhs">Junior High School</option>
                            <option value="all">All Levels</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="teacherClass">Class/Subject</label>
                        <input type="text" id="teacherClass" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="teacherEmail">Email</label>
                        <input type="email" id="teacherEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="teacherPhone">Phone Number</label>
                        <input type="tel" id="teacherPhone" class="form-control" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="teacherQualifications">Qualifications</label>
                    <textarea id="teacherQualifications" class="form-control" rows="3"></textarea>
                </div>
                
                <div style="text-align: right; margin-top: 1.5rem;">
                    <button type="button" class="btn" style="margin-right: 10px;">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Teacher</button>
                </div>
            </form>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>6 Garrison Education Center</h3>
                    <p>Comprehensive school management system for Nursery, Primary and JHS institutions.</p>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p><i class="fas fa-map-marker-alt"></i> Tamale, Northern Region, Ghana</p>
                    <p><i class="fas fa-phone"></i> +233 24 123 4567</p>
                    <p><i class="fas fa-envelope"></i> info@6garrison.edu.gh</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 6 Garrison Education Center. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize Chart.js
        let performanceChart;
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApplication();
        });

        function initializeApplication() {
            // Load user preferences
            loadUserPreferences();
            
            // Check if user is logged in
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            const userRole = localStorage.getItem('userRole') || 'admin';
            
            // Show login or dashboard based on login status
            if (!isLoggedIn) {
                document.getElementById('login').classList.add('active');
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.style.display = 'none';
                });
            } else {
                document.getElementById('dashboard').classList.add('active');
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.style.display = 'block';
                });
                // Apply role-based view
                applyRoleBasedView(userRole);
                // Initialize chart
                initializeChart();
                // Start real-time updates
                startRealTimeUpdates();
            }

            // Setup event listeners
            setupEventListeners();
            // Setup tooltips
            setupTooltips();
            // Setup keyboard shortcuts
            setupKeyboardShortcuts();
        }

        // Setup all event listeners
        function setupEventListeners() {
            // Login functionality
            document.querySelector('.login-form').addEventListener('submit', handleLogin);
            
            // Role selection
            document.querySelectorAll('.role-option').forEach(option => {
                option.addEventListener('click', handleRoleSelection);
            });

            // Logout functionality
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);

            // Navigation functionality
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', handleNavigation);
            });

            // User dropdown functionality
            const userInfo = document.querySelector('.user-info');
            const userDropdown = document.querySelector('.user-dropdown');

            userInfo.addEventListener('click', () => {
                userDropdown.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!userInfo.contains(e.target)) {
                    userDropdown.classList.remove('active');
                }
            });

            // User dropdown navigation
            document.querySelectorAll('.user-dropdown a').forEach(link => {
                link.addEventListener('click', handleUserDropdownNav);
            });

            // Dark mode functionality
            const darkModeToggle = document.getElementById('darkModeToggle');
            darkModeToggle.addEventListener('change', toggleDarkMode);

            // Mobile menu toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navMenu = document.getElementById('navMenu');
            
            mobileMenuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!mobileMenuToggle.contains(e.target) && !navMenu.contains(e.target)) {
                    navMenu.classList.remove('active');
                }
            });

            // Admin panel navigation
            document.querySelectorAll('.admin-nav').forEach(link => {
                link.addEventListener('click', handleAdminNavigation);
            });

            // Tab functionality
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', handleTabClick);
            });

            // Modal functionality
            setupModalFunctionality();

            // Portal access buttons
            document.querySelectorAll('[data-portal]').forEach(button => {
                button.addEventListener('click', handlePortalAccess);
            });

            // Export buttons
            document.querySelectorAll('.export-btn').forEach(btn => {
                btn.addEventListener('click', handleExport);
            });

            // Search functionality
            setupSearchFunctionality();

            // Form validation
            setupFormValidation();

            // Settings changes
            document.getElementById('language').addEventListener('change', saveUserPreferences);
            document.getElementById('timezone').addEventListener('change', saveUserPreferences);
            document.getElementById('emailNotifications').addEventListener('change', saveUserPreferences);
            document.getElementById('pushNotifications').addEventListener('change', saveUserPreferences);
            document.getElementById('compactViewToggle').addEventListener('change', toggleCompactView);
        }

        // Login handler
        function handleLogin(e) {
            e.preventDefault();
            showLoading();
            
            setTimeout(() => {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const role = document.querySelector('.role-option.active').getAttribute('data-role');
                
                // Simple authentication (in a real app, this would be server-side)
                if (username && password) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('userRole', role);
                    localStorage.setItem('username', username);
                    
                    // Hide login and show dashboard
                    document.getElementById('login').classList.remove('active');
                    document.getElementById('dashboard').classList.add('active');
                    
                    // Show navigation
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.style.display = 'block';
                    });
                    
                    // Apply role-based view
                    applyRoleBasedView(role, username);
                    
                    // Initialize chart
                    initializeChart();
                    
                    // Start real-time updates
                    startRealTimeUpdates();
                    
                    hideLoading();
                } else {
                    alert('Please enter username and password');
                    hideLoading();
                }
            }, 1000);
        }

        // Role selection handler
        function handleRoleSelection() {
            document.querySelectorAll('.role-option').forEach(opt => {
                opt.classList.remove('active');
            });
            this.classList.add('active');
        }

        // Apply role-based view
        function applyRoleBasedView(role, username) {
            // Remove all role classes from body
            document.body.classList.remove('admin-view', 'teacher-view', 'student-view', 'parent-view');
            
            // Add the current role class
            document.body.classList.add(`${role}-view`);
            
            // Update dashboard title based on role
            const dashboardTitle = document.getElementById('dashboard-title');
            switch(role) {
                case 'admin':
                    dashboardTitle.textContent = 'School Management Dashboard';
                    break;
                case 'teacher':
                    dashboardTitle.textContent = 'Teacher Dashboard';
                    break;
                case 'student':
                    dashboardTitle.textContent = 'Student Dashboard';
                    break;
                case 'parent':
                    dashboardTitle.textContent = 'Parent Dashboard';
                    break;
            }
            
            // Update user info
            updateUserInfo(role, username);
            
            // Update breadcrumbs
            updateBreadcrumbs('Dashboard');
        }

        // Update user info based on role
        function updateUserInfo(role, username) {
            const userInfo = document.querySelector('.user-info span');
            const userImg = document.querySelector('.user-info img');
            
            let name, imgName;
            switch(role) {
                case 'admin':
                    name = 'Admin User';
                    imgName = 'Admin+User';
                    break;
                case 'teacher':
                    name = 'Teacher: ' + (username || 'Grace Mensah');
                    imgName = username || 'Grace+Mensah';
                    break;
                case 'student':
                    name = 'Student: ' + (username || 'Kwame Mensah');
                    imgName = username || 'Kwame+Mensah';
                    break;
                case 'parent':
                    name = 'Parent: ' + (username || 'Michael Johnson');
                    imgName = username || 'Michael+Johnson';
                    break;
            }
            
            userInfo.textContent = name;
            userImg.src = `https://ui-avatars.com/api/?name=${imgName}&background=3498db&color=fff`;
        }

        // Logout handler
        function handleLogout(e) {
            e.preventDefault();
            localStorage.setItem('isLoggedIn', 'false');
            
            // Hide all sections except login
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('login').classList.add('active');
            
            // Hide navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.style.display = 'none';
            });
            
            // Reset form
            document.querySelector('.login-form').reset();
            
            // Reset to admin role selection
            document.querySelectorAll('.role-option').forEach(opt => {
                opt.classList.remove('active');
            });
            document.querySelector('.role-option[data-role="admin"]').classList.add('active');
            
            // Close mobile menu
            document.getElementById('navMenu').classList.remove('active');
        }

        // Navigation handler
        function handleNavigation(e) {
            e.preventDefault();
            const target = this.getAttribute('data-target');
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            
            // Show target section
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(target).classList.add('active');
            
            // Update breadcrumbs
            updateBreadcrumbs(this.textContent.trim());
            
            // Close mobile menu on mobile
            if (window.innerWidth <= 768) {
                document.getElementById('navMenu').classList.remove('active');
            }
            
            // Initialize chart if on reports page
            if (target === 'reports') {
                initializeChart();
            }
        }

        // User dropdown navigation handler
        function handleUserDropdownNav(e) {
            e.preventDefault();
            const target = this.getAttribute('data-target');
            
            if (target === 'settings' || target === 'admin') {
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                
                // Show target section
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(target).classList.add('active');
                
                // Update breadcrumbs
                updateBreadcrumbs(this.textContent.trim());
                
                // Close dropdown
                document.querySelector('.user-dropdown').classList.remove('active');
            }
            
            if (this.classList.contains('dark-mode-toggle')) {
                toggleDarkMode();
            }
        }

        // Admin navigation handler
        function handleAdminNavigation(e) {
            e.preventDefault();
            const target = this.getAttribute('data-admin-tab');
            
            // Update active admin nav link
            document.querySelectorAll('.admin-nav').forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            
            // Show target admin tab
            document.querySelectorAll('.admin-tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(`admin-${target}`).classList.add('active');
        }

        // Tab click handler
        function handleTabClick() {
            const parent = this.closest('.tabs');
            parent.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
        }

        // Portal access handler
        function handlePortalAccess() {
            const portal = this.getAttribute('data-portal');
            showShortcutHint(`Redirecting to ${portal} portal...`);
            
            // Simulate portal loading
            showLoading();
            setTimeout(() => {
                hideLoading();
                alert(`In a complete implementation, this would redirect to the dedicated portal interface for ${portal}s.`);
            }, 1500);
        }

        // Export handler
        function handleExport() {
            const tableId = this.getAttribute('data-table');
            const table = document.getElementById(tableId);
            const filename = `${tableId}_${new Date().toISOString().slice(0,10)}.csv`;
            
            exportTableToCSV(table, filename);
        }

        // Setup modal functionality
        function setupModalFunctionality() {
            const modals = {
                addStudent: document.getElementById('addStudentModal'),
                addTeacher: document.getElementById('addTeacherModal')
            };

            const buttons = {
                addStudent: document.getElementById('addStudentBtn'),
                addTeacher: document.getElementById('addTeacherBtn'),
                quickAdd: document.getElementById('quickAddBtn')
            };

            const closeButtons = document.querySelectorAll('.close');

            // Open modals
            if (buttons.addStudent) {
                buttons.addStudent.onclick = function() {
                    modals.addStudent.style.display = 'flex';
                }
            }

            if (buttons.addTeacher) {
                buttons.addTeacher.onclick = function() {
                    modals.addTeacher.style.display = 'flex';
                }
            }

            if (buttons.quickAdd) {
                buttons.quickAdd.onclick = function() {
                    modals.addStudent.style.display = 'flex';
                }
            }

            // Export chart button
            document.getElementById('exportChartBtn')?.addEventListener('click', exportChart);

            // Export all data button
            document.getElementById('exportAllDataBtn')?.addEventListener('click', exportAllData);

            // Close modals
            closeButtons.forEach(button => {
                button.onclick = function() {
                    Object.values(modals).forEach(modal => {
                        if (modal) modal.style.display = 'none';
                    });
                }
            });

            window.onclick = function(event) {
                Object.values(modals).forEach(modal => {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                });
            }
        }

        // Setup search functionality
        function setupSearchFunctionality() {
            document.querySelectorAll('input[placeholder*="Search"]').forEach(input => {
                input.addEventListener('keyup', function() {
                    const table = this.closest('.content-section').querySelector('table');
                    if (table) {
                        searchTable(table, this.value);
                    }
                });
            });
        }

        // Setup form validation
        function setupFormValidation() {
            document.getElementById('addStudentForm')?.addEventListener('submit', function(e) {
                if (!validateForm(this)) {
                    e.preventDefault();
                    e.stopPropagation();
                } else {
                    e.preventDefault();
                    showLoading();
                    setTimeout(() => {
                        alert('Student added successfully!');
                        document.getElementById('addStudentModal').style.display = 'none';
                        this.reset();
                        hideLoading();
                    }, 1000);
                }
            });

            document.getElementById('addTeacherForm')?.addEventListener('submit', function(e) {
                if (!validateForm(this)) {
                    e.preventDefault();
                    e.stopPropagation();
                } else {
                    e.preventDefault();
                    showLoading();
                    setTimeout(() => {
                        alert('Teacher added successfully!');
                        document.getElementById('addTeacherModal').style.display = 'none';
                        this.reset();
                        hideLoading();
                    }, 1000);
                }
            });
        }

        // Setup keyboard shortcuts
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // Ctrl + S for save
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                    e.preventDefault();
                    showShortcutHint('Save shortcut triggered');
                    alert('In production, this would save changes');
                }
                
                // Ctrl + F for search
                if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                    e.preventDefault();
                    const searchInput = document.querySelector('input[placeholder*="Search"]');
                    if (searchInput) {
                        searchInput.focus();
                        showShortcutHint('Search activated');
                    }
                }
                
                // Escape to close modals
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                    document.querySelector('.user-dropdown').classList.remove('active');
                    document.getElementById('navMenu').classList.remove('active');
                    showShortcutHint('Closed modals and menus');
                }
                
                // Ctrl + D for dark mode
                if ((e.ctrlKey || e.metaKey) && e.key === 'd') {
                    e.preventDefault();
                    toggleDarkMode();
                    showShortcutHint('Toggled dark mode');
                }
                
                // Ctrl + P for print
                if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                    e.preventDefault();
                    showShortcutHint('Opening print dialog...');
                    setTimeout(() => window.print(), 100);
                }
            });
        }

        // Setup tooltips
        function setupTooltips() {
            document.querySelectorAll('[title]').forEach(el => {
                el.addEventListener('mouseenter', function(e) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'tooltip';
                    tooltip.textContent = this.title;
                    document.body.appendChild(tooltip);
                    
                    const rect = this.getBoundingClientRect();
                    tooltip.style.top = (rect.top - tooltip.offsetHeight - 10) + 'px';
                    tooltip.style.left = (rect.left + rect.width/2 - tooltip.offsetWidth/2) + 'px';
                    
                    setTimeout(() => tooltip.classList.add('active'), 10);
                });
                
                el.addEventListener('mouseleave', function() {
                    const tooltip = document.querySelector('.tooltip');
                    if (tooltip) {
                        tooltip.classList.remove('active');
                        setTimeout(() => tooltip.remove(), 300);
                    }
                });
            });
        }

        // Initialize Chart.js chart
        function initializeChart() {
            const ctx = document.getElementById('performanceChart')?.getContext('2d');
            if (!ctx) return;
            
            if (performanceChart) {
                performanceChart.destroy();
            }
            
            performanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Nursery', 'Primary', 'JHS', 'Overall'],
                    datasets: [{
                        label: 'Pass Rate %',
                        data: [92, 87, 78, 86],
                        backgroundColor: [
                            'rgba(255, 159, 243, 0.7)',
                            'rgba(84, 160, 255, 0.7)',
                            'rgba(29, 209, 161, 0.7)',
                            'rgba(155, 89, 182, 0.7)'
                        ],
                        borderColor: [
                            'rgb(255, 159, 243)',
                            'rgb(84, 160, 255)',
                            'rgb(29, 209, 161)',
                            'rgb(155, 89, 182)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Start real-time updates
        function startRealTimeUpdates() {
            // Update stats immediately
            updateRealTimeStats();
            
            // Update every 30 seconds
            setInterval(updateRealTimeStats, 30000);
        }

        // Real-time stats update
        function updateRealTimeStats() {
            // Simulate real-time updates
            const stats = {
                nursery: Math.floor(245 + Math.random() * 5),
                primary: Math.floor(512 + Math.random() * 10),
                jhs: Math.floor(328 + Math.random() * 5),
                staff: Math.floor(68 + Math.random() * 2),
                fees: Math.floor(86420 + Math.random() * 1000)
            };
            
            // Update DOM elements
            document.getElementById('nurseryCount').textContent = stats.nursery;
            document.getElementById('primaryCount').textContent = stats.primary;
            document.getElementById('jhsCount').textContent = stats.jhs;
            document.getElementById('staffCount').textContent = stats.staff;
            document.getElementById('feesCollected').textContent = `â‚µ${stats.fees.toLocaleString()}`;
            
            // Update dashboard title with current time
            const now = new Date();
            const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const dashboardTitle = document.getElementById('dashboard-title');
            const baseText = dashboardTitle.textContent.split(' (')[0];
            dashboardTitle.innerHTML = `${baseText} <small style="font-size: 0.6em; color: var(--primary)">(${timeString})</small>`;
        }

        // Export table to CSV
        function exportTableToCSV(table, filename) {
            const rows = table.querySelectorAll('tr');
            const csv = [];
            
            for (const row of rows) {
                const rowData = [];
                const cols = row.querySelectorAll('td, th');
                
                for (const col of cols) {
                    // Remove action buttons from export
                    if (!col.classList.contains('no-export')) {
                        rowData.push(`"${col.innerText.replace(/"/g, '""')}"`);
                    }
                }
                
                csv.push(rowData.join(','));
            }
            
            const csvString = csv.join('\n');
            const blob = new Blob([csvString], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
            
            showShortcutHint(`Exported ${filename}`);
        }

        // Export chart as image
        function exportChart() {
            if (!performanceChart) return;
            
            const link = document.createElement('a');
            link.download = `performance_chart_${new Date().toISOString().slice(0,10)}.png`;
            link.href = performanceChart.toBase64Image();
            link.click();
            
            showShortcutHint('Chart exported as PNG');
        }

        // Export all data
        function exportAllData() {
            showLoading();
            setTimeout(() => {
                alert('In a complete implementation, this would export all system data as a ZIP file.');
                hideLoading();
                showShortcutHint('All data export initiated');
            }, 1500);
        }

        // Search table
        function searchTable(table, searchTerm) {
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 1; i < rows.length; i++) {
                const row = rows[i];
                let found = false;
                const cells = row.getElementsByTagName('td');
                
                for (const cell of cells) {
                    if (cell.textContent.toLowerCase().includes(searchTerm.toLowerCase())) {
                        found = true;
                        break;
                    }
                }
                
                row.style.display = found ? '' : 'none';
            }
        }

        // Form validation
        function validateForm(form) {
            let isValid = true;
            const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.style.borderColor = 'var(--danger)';
                    isValid = false;
                    
                    // Add error message
                    if (!input.nextElementSibling?.classList.contains('error-message')) {
                        const error = document.createElement('div');
                        error.className = 'error-message';
                        error.textContent = 'This field is required';
                        input.parentNode.appendChild(error);
                    }
                } else {
                    input.style.borderColor = '';
                    const error = input.nextElementSibling;
                    if (error?.classList.contains('error-message')) {
                        error.remove();
                    }
                }
            });
            
            return isValid;
        }

        // Dark mode functionality
        function toggleDarkMode() {
            const body = document.body;
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                document.getElementById('darkModeToggle').checked = true;
            } else {
                localStorage.setItem('darkMode', 'disabled');
                document.getElementById('darkModeToggle').checked = false;
            }
            
            saveUserPreferences();
        }

        // Compact view toggle
        function toggleCompactView() {
            const body = document.body;
            if (document.getElementById('compactViewToggle').checked) {
                body.classList.add('compact-view');
                document.querySelectorAll('table').forEach(table => {
                    table.style.fontSize = '0.9rem';
                });
            } else {
                body.classList.remove('compact-view');
                document.querySelectorAll('table').forEach(table => {
                    table.style.fontSize = '';
                });
            }
            saveUserPreferences();
        }

        // Load user preferences
        function loadUserPreferences() {
            const saved = localStorage.getItem('userPreferences');
            if (saved) {
                const preferences = JSON.parse(saved);
                
                // Apply dark mode
                if (preferences.darkMode) {
                    document.body.classList.add('dark-mode');
                    document.getElementById('darkModeToggle').checked = true;
                }
                
                // Apply compact view
                if (preferences.compactView) {
                    document.body.classList.add('compact-view');
                    document.getElementById('compactViewToggle').checked = true;
                    document.querySelectorAll('table').forEach(table => {
                        table.style.fontSize = '0.9rem';
                    });
                }
                
                // Apply other preferences
                if (preferences.language) {
                    document.getElementById('language').value = preferences.language;
                }
                if (preferences.timezone) {
                    document.getElementById('timezone').value = preferences.timezone;
                }
                if (preferences.emailNotifications !== undefined) {
                    document.getElementById('emailNotifications').checked = preferences.emailNotifications;
                }
                if (preferences.pushNotifications !== undefined) {
                    document.getElementById('pushNotifications').checked = preferences.pushNotifications;
                }
            }
        }

        // Save user preferences
        function saveUserPreferences() {
            const preferences = {
                darkMode: document.body.classList.contains('dark-mode'),
                compactView: document.getElementById('compactViewToggle').checked,
                language: document.getElementById('language').value,
                timezone: document.getElementById('timezone').value,
                emailNotifications: document.getElementById('emailNotifications').checked,
                pushNotifications: document.getElementById('pushNotifications').checked
            };
            
            localStorage.setItem('userPreferences', JSON.stringify(preferences));
        }

        // Update breadcrumbs
        function updateBreadcrumbs(currentPage) {
            document.getElementById('currentPage').textContent = currentPage;
        }

        // Show loading overlay
        function showLoading() {
            document.getElementById('loadingOverlay').classList.add('active');
        }

        // Hide loading overlay
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.remove('active');
        }

        // Show shortcut hint
        function showShortcutHint(message) {
            const hint = document.getElementById('shortcutHint');
            hint.textContent = message;
            hint.classList.add('active');
            
            setTimeout(() => {
                hint.classList.remove('active');
            }, 2000);
        }
    </script>
</body>
</html>